NinjaControl ninjacontrol;
NinjaLevel ninjalevel;
SQL sql;
PFont font;
EvilController ec;
HUD hud;
Boolean didSQL=false;
ArrayList<NinjaLevel>movie;
ArrayList<HUD>splash;


void setup()
{

    imageMode(CENTER);
       frameRate(30);
          font=loadFont("ChangChang-48.vlw");
      textFont(font);
     size(displayWidth,displayHeight);
sql=new SQL(); 

           ninjalevel=new NinjaLevel();
        hud=new HUD();
ninjacontrol=new NinjaControl();
ec=new EvilController();
ec.highscore=sql.getQuery(); 
movie=new ArrayList<NinjaLevel>();
splash=new ArrayList<HUD>();  
movie.add(ninjalevel);
splash.add(hud);
}


void draw()
{
clear();
background(150);

//if( splash.size()==0 && movie.size()==0)
//{
  ninjalevel.loadLevel();
if(!ninjalevel.checkArtifactHealth())
{ninjacontrol.checkInput(ninjalevel,ec);
hud.displayKills(ec);
hud.displayHud();
hud.displayWeapons(ninjacontrol);
ec.play(ninjacontrol,ninjalevel,hud);
}
else if(ninjalevel.checkArtifactHealth() && !didSQL)
{
  
sql.putQuery(ec);
didSQL=true;
}
ninjalevel.loadDragon();
//}

/*else if(splash.size()!=0 && movie.size()==0)
{
if(splash.get(0).displayCheckMenu())
splash.remove(0);
}*/

/*else
{
 if(movie.get(0).startupMovie())
{
movie.remove(0);
ninjalevel.startupMovie=null;
}
}*/
}
void mouseReleased()
{
ninjacontrol.b_mouseHold=false;
}

void mouseWheel(MouseEvent e)
{
  if(!ninjacontrol.b_isAttacking)
  {
ninjacontrol.w+=e.getCount();
  if(ninjacontrol.w>2)
  ninjacontrol.w=0;
  else if(ninjacontrol.w<0)
  ninjacontrol.w=2;
  }
}

void keyReleased()
{  
ninjacontrol.b_keyHold=false;
if(!ninjacontrol.b_jumping)
{
ninjacontrol.setVelocityZero();
}
if(ninjacontrol.j_force>0)
{
ninjacontrol.b_jumping=true;
}
}


boolean sketchFullScreen() {
  return true;}